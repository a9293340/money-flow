# Personal Finance Manager - 使用者故事

## 故事優先級說明
- **P0**: 核心功能，MVP 必須包含
- **P1**: 重要功能，第二階段開發
- **P2**: 進階功能，後續版本考慮
- **P3**: 附加功能，有時間再開發

---

## 基礎記帳功能

### US001: 記錄支出 (P0)
**作為** 使用者  
**我希望** 能夠快速記錄一筆支出  
**以便** 追蹤我的日常花費  

**接受條件 (AC):**
- AC1: 使用者可以輸入金額、選擇分類、新增備註和日期
- AC2: 金額只接受正數，最多支援到小數點後2位
- AC3: 日期預設為今天，但可以選擇其他日期
- AC4: 備註為選填欄位，最多100字元
- AC5: 提交後顯示成功訊息並清空表單
- AC6: 驗證失敗時顯示明確的錯誤訊息

**使用流程:**
1. 點擊「新增支出」按鈕
2. 輸入金額（必填）
3. 從下拉選單選擇分類（必填）
4. 輸入備註（選填）
5. 選擇日期（預設今天）
6. 點擊「儲存」完成記錄

---

### US002: 記錄收入 (P0)
**作為** 使用者  
**我希望** 能夠記錄收入來源  
**以便** 了解我的完整財務狀況  

**接受條件:**
- AC1: 收入記錄包含：金額、來源分類、備註、日期
- AC2: 收入分類包括：薪資、獎金、投資收益、其他收入
- AC3: 收入在統計中與支出分開顯示
- AC4: 金額驗證規則與支出相同
- AC5: 表單驗證和錯誤處理與支出一致

---

### US003: 查看交易記錄 (P0)
**作為** 使用者  
**我希望** 能查看我的歷史交易記錄  
**以便** 回顧我的消費模式  

**接受條件:**
- AC1: 顯示交易清單，包含日期、金額、分類、備註
- AC2: 預設按日期降序排列（最新的在前）
- AC3: 收入顯示綠色，支出顯示紅色
- AC4: 每頁顯示20筆記錄，支援分頁
- AC5: 在手機版上適當縮減顯示欄位
- AC6: 空狀態時顯示「尚無交易記錄」提示

---

### US004: 編輯交易記錄 (P0)
**作為** 使用者  
**我希望** 能修改錯誤的交易記錄  
**以便** 保持資料的準確性  

**接受條件:**
- AC1: 點擊交易記錄可進入編輯模式
- AC2: 所有欄位都可以修改
- AC3: 修改後需要重新驗證資料
- AC4: 顯示「最後修改時間」
- AC5: 提供取消修改功能
- AC6: 修改成功後返回列表頁面

---

### US005: 刪除交易記錄 (P0)
**作為** 使用者  
**我希望** 能刪除錯誤的交易記錄  
**以便** 保持帳目整潔  

**接受條件:**
- AC1: 提供刪除按鈕或選項
- AC2: 刪除前顯示確認對話框
- AC3: 確認對話框顯示將被刪除的記錄詳情
- AC4: 刪除後立即更新列表和統計數據
- AC5: 刪除後無法復原（暫不考慮軟刪除）

---

## 分類管理功能

### US006: 使用預設分類 (P0)
**作為** 使用者  
**我希望** 系統提供常用的分類選項  
**以便** 快速歸類我的支出  

**接受條件:**
- AC1: 支出分類包含：餐飲、交通、購物、娛樂、醫療、教育、居家、其他
- AC2: 收入分類包含：薪資、獎金、投資收益、其他收入
- AC3: 每個分類都有對應的圖示
- AC4: 分類按使用頻率排序
- AC5: 「其他」分類始終在最後

---

### US007: 自定義分類 (P1)
**作為** 使用者  
**我希望** 能建立自己的分類  
**以便** 符合我個人的消費習慣  

**接受條件:**
- AC1: 可以新增自定義分類名稱
- AC2: 可以選擇分類圖示和顏色
- AC3: 分類名稱不能重複
- AC4: 最多允許建立50個自定義分類
- AC5: 可以編輯和刪除自定義分類
- AC6: 刪除分類前檢查是否有交易使用該分類

---

### US008: 子分類管理 (P2)
**作為** 進階使用者  
**我希望** 能建立分類的子分類  
**以便** 更精細地管理支出  

**接受條件:**
- AC1: 可以為主分類建立子分類
- AC2: 子分類最多2層深度
- AC3: 統計時可以按主分類或子分類查看
- AC4: 刪除主分類時處理子分類的歸屬

---

## 統計分析功能

### US009: 查看月度統計 (P0)
**作為** 使用者  
**我希望** 能查看當月的收支統計  
**以便** 了解我的財務狀況  

**接受條件:**
- AC1: 顯示當月總收入、總支出、結餘
- AC2: 顯示支出分類統計（圓餅圖）
- AC3: 顯示每日支出趨勢（折線圖）
- AC4: 可以切換查看其他月份
- AC5: 在手機版上圖表要能正常顯示和互動
- AC6: 無資料時顯示空狀態提示

---

### US010: 查看年度統計 (P1)
**作為** 使用者  
**我希望** 能查看年度財務總覽  
**以便** 了解長期的消費趨勢  

**接受條件:**
- AC1: 顯示年度總收入、總支出、結餘
- AC2: 顯示每月收支趨勢圖
- AC3: 顯示年度分類支出統計
- AC4: 可以切換查看不同年份
- AC5: 提供年度財務報告摘要

---

### US011: 支出排行分析 (P1)
**作為** 使用者  
**我希望** 能看到支出最多的分類  
**以便** 找出節流的重點  

**接受條件:**
- AC1: 顯示分類支出排名（當月/當年）
- AC2: 顯示每個分類的支出金額和佔比
- AC3: 可以點擊分類查看詳細記錄
- AC4: 支援不同時間區間的查詢

---

## 預算管理功能

### US012: 設定月度預算 (P1)
**作為** 使用者  
**我希望** 能設定每月的支出預算  
**以便** 控制我的消費  

**接受條件:**
- AC1: 可以設定總預算金額
- AC2: 可以為各分類設定子預算
- AC3: 子預算總和不能超過總預算
- AC4: 預算設定後立即生效
- AC5: 可以修改預算設定

---

### US013: 預算執行監控 (P1)
**作為** 使用者  
**我希望** 能看到預算的執行情況  
**以便** 及時調整消費行為  

**接受條件:**
- AC1: 顯示總預算的使用進度條
- AC2: 顯示各分類預算的使用情況
- AC3: 超出預算時標記為紅色警告
- AC4: 顯示剩餘預算金額
- AC5: 在記帳時顯示該分類剩餘預算

---

### US014: 預算超支警告 (P1)
**作為** 使用者  
**我希望** 在即將超出預算時收到提醒  
**以便** 提前調整消費計劃  

**接受條件:**
- AC1: 達到預算80%時顯示提醒
- AC2: 超出預算時顯示警告
- AC3: 在記帳時即時檢查預算狀況
- AC4: 提供預算調整的快速入口
- AC5: 手機版支援推播通知（P2）

---

## 多幣別功能

### US015: 設定主要貨幣 (P1)
**作為** 使用者  
**我希望** 能設定我的主要使用貨幣  
**以便** 統一顯示金額  

**接受條件:**
- AC1: 支援主要貨幣：TWD, USD, EUR, JPY, GBP, CNY
- AC2: 預設為 TWD
- AC3: 更改主貨幣後所有顯示金額都轉換
- AC4: 歷史記錄保持原始幣別記錄

---

### US016: 多幣別記帳 (P2)
**作為** 國際使用者  
**我希望** 能記錄不同貨幣的交易  
**以便** 準確記錄我的消費  

**接受條件:**
- AC1: 記帳時可選擇交易貨幣
- AC2: 自動獲取當日匯率進行轉換
- AC3: 保存原始金額和轉換後金額
- AC4: 顯示匯率和轉換時間
- AC5: 統計時統一使用主貨幣顯示

---

## 資料管理功能

### US017: 匯出資料 (P2)
**作為** 使用者  
**我希望** 能匯出我的財務資料  
**以便** 進行備份或進階分析  

**接受條件:**
- AC1: 支援匯出 CSV 格式
- AC2: 可選擇匯出時間範圍
- AC3: 包含所有交易詳情
- AC4: 檔名包含匯出日期
- AC5: 桌面版直接下載，手機版提供分享選項

---

### US018: 匯入資料 (P2)
**作為** 使用者  
**我希望** 能匯入其他記帳軟體的資料  
**以便** 無縫轉移到新系統  

**接受條件:**
- AC1: 支援 CSV 格式匯入
- AC2: 提供範本檔案下載
- AC3: 匯入前預覽資料
- AC4: 驗證資料格式和內容
- AC5: 匯入失敗時提供錯誤報告

---

## 搜尋和篩選功能

### US019: 搜尋交易記錄 (P1)
**作為** 使用者  
**我希望** 能搜尋特定的交易記錄  
**以便** 快速找到需要的資訊  

**接受條件:**
- AC1: 支援按備註內容搜尋
- AC2: 支援按金額範圍搜尋
- AC3: 支援按日期範圍篩選
- AC4: 支援按分類篩選
- AC5: 支援複合條件搜尋
- AC6: 搜尋結果高亮顯示關鍵字

---

## 跨平台特色功能

### US020: 快速記帳 - 手機版 (P1)
**作為** 手機使用者  
**我希望** 能快速記錄消費  
**以便** 即時追蹤支出  

**接受條件:**
- AC1: 提供快速記帳入口（大按鈕）
- AC2: 常用分類快捷按鈕
- AC3: 支援語音輸入金額（P3）
- AC4: 記帳成功後震動回饋
- AC5: 支援離線記帳，上線後同步

---

### US021: 批量操作 - 桌面版 (P2)
**作為** 桌面版使用者  
**我希望** 能進行批量資料操作  
**以便** 提高管理效率  

**接受條件:**
- AC1: 支援多選交易記錄
- AC2: 批量刪除功能
- AC3: 批量修改分類
- AC4: 批量匯出選定記錄
- AC5: 拖拽檔案匯入

---

### US022: 資料同步 (P0)
**作為** 多裝置使用者  
**我希望** 資料能在各裝置間同步  
**以便** 隨時隨地查看最新資料  

**接受條件:**
- AC1: 登入後自動同步資料
- AC2: 支援離線使用，連線後同步
- AC3: 衝突時以最後修改時間為準
- AC4: 同步狀態即時顯示
- AC5: 同步失敗時提供重試選項

---

## 安全和設定功能

### US023: 使用者帳號系統 (P0)
**作為** 使用者  
**我希望** 能建立個人帳號  
**以便** 安全地儲存我的財務資料  

**接受條件:**
- AC1: 支援 Email 註冊和登入
- AC2: 密碼需包含英數字，至少8位
- AC3: 支援忘記密碼重設
- AC4: 登入狀態保持7天
- AC5: 提供登出功能

---

### US024: 隱私保護 (P1)
**作為** 重視隱私的使用者  
**我希望** 我的財務資料受到保護  
**以便** 安心使用應用程式  

**接受條件:**
- AC1: 資料傳輸使用 HTTPS 加密
- AC2: 敏感資料在資料庫中加密儲存
- AC3: 桌面版支援本地密碼保護（P2）
- AC4: 提供資料刪除功能
- AC5: 隱私政策頁面

---

### US025: 應用程式設定 (P1)
**作為** 使用者  
**我希望** 能自定義應用程式設定  
**以便** 符合我的使用習慣  

**接受條件:**
- AC1: 支援深色/淺色主題切換
- AC2: 可設定預設分類
- AC3: 可設定日期格式
- AC4: 可設定小數點位數顯示
- AC5: 語言設定（初期僅繁體中文）

---

## 效能和體驗需求

### US026: 快速載入 (P0)
**作為** 使用者  
**我希望** 應用程式能快速載入  
**以便** 有良好的使用體驗  

**接受條件:**
- AC1: 首頁載入時間不超過3秒
- AC2: 記帳操作回應時間不超過1秒
- AC3: 圖表渲染時間不超過2秒
- AC4: 支援載入狀態指示
- AC5: 大量資料時支援懶載入

---

### US027: 離線支援 (P2)
**作為** 行動使用者  
**我希望** 在無網路時也能記帳  
**以便** 不中斷記帳習慣  

**接受條件:**
- AC1: 基本記帳功能支援離線操作
- AC2: 離線資料在連線後自動同步
- AC3: 離線狀態明確提示
- AC4: 同步衝突時提供解決選項

---

## 開發階段建議

### Phase 1 (MVP): P0 功能
- US001-005: 基礎記帳功能
- US006: 預設分類系統
- US009: 基礎統計
- US022: 資料同步
- US023: 帳號系統
- US026: 效能需求

### Phase 2: P1 功能  
- US007: 自定義分類
- US010-014: 完整統計和預算功能
- US015: 多幣別基礎
- US019-021: 搜尋和平台特色

### Phase 3: P2 功能
- US008, US016-018: 進階功能
- US024-025, US027: 體驗優化

---

## 多人協作功能

### US028: 家庭帳本共享 (P2)
**作為** 家庭主要理財者  
**我希望** 能與家人共同管理家庭帳本  
**以便** 完整掌握家庭財務狀況  

**接受條件:**
- AC1: 可以邀請其他使用者加入共同帳本
- AC2: 支援不同權限等級（管理者/記帳者/檢視者）
- AC3: 所有成員的記帳都會即時同步
- AC4: 可以看到是誰新增的記錄
- AC5: 管理者可以移除成員
- AC6: 邀請通過 Email 或邀請碼發送
- AC7: 被邀請者需要確認才能加入帳本

**使用流程:**
1. 點擊「邀請成員」功能
2. 輸入成員 Email 地址
3. 選擇權限等級
4. 發送邀請連結
5. 被邀請者確認加入
6. 開始共同記帳

---

### US029: 權限管理 (P2)
**作為** 帳本管理者  
**我希望** 能控制成員的操作權限  
**以便** 保護重要財務資料  

**接受條件:**
- AC1: 檢視者只能查看資料，無法編輯
- AC2: 記帳者可以新增/編輯自己的記錄
- AC3: 管理者擁有所有權限
- AC4: 預算設定只有管理者可以修改
- AC5: 成員清單只有管理者可以管理
- AC6: 分類管理需要管理者權限
- AC7: 資料匯出需要管理者或記帳者權限

**權限矩陣:**
| 功能 | 檢視者 | 記帳者 | 管理者 |
|------|--------|--------|--------|
| 查看記錄 | ✓ | ✓ | ✓ |
| 新增記錄 | ✗ | ✓ | ✓ |
| 編輯自己記錄 | ✗ | ✓ | ✓ |
| 編輯他人記錄 | ✗ | ✗ | ✓ |
| 刪除記錄 | ✗ | ✓(自己) | ✓ |
| 預算設定 | ✗ | ✗ | ✓ |
| 成員管理 | ✗ | ✗ | ✓ |
| 分類管理 | ✗ | ✗ | ✓ |

---

### US030: 記錄歸屬標示 (P2)
**作為** 共享帳本使用者  
**我希望** 能看到每筆記錄是誰新增的  
**以便** 了解家庭成員的消費習慣  

**接受條件:**
- AC1: 記錄列表顯示記帳人員姓名或頭像
- AC2: 統計分析可以按人員篩選
- AC3: 個人只能編輯自己的記錄（除非是管理者）
- AC4: 支援按記帳人員產生報表
- AC5: 成員顯示使用不同顏色區分
- AC6: 個人消費統計和家庭總計分別顯示

**使用流程:**
1. 在記錄列表查看記帳人標示
2. 點擊成員篩選器
3. 選擇特定成員
4. 查看該成員的消費記錄和統計

---

### US031: 協作通知 (P3)
**作為** 共享帳本成員  
**我希望** 能收到重要的帳本異動通知  
**以便** 及時了解財務狀況  

**接受條件:**
- AC1: 預算超支時通知所有成員
- AC2: 大額支出時發送通知（可設定金額門檻）
- AC3: 新成員加入時通知現有成員
- AC4: 可以設定通知偏好（Email/App內通知）
- AC5: 成員離開帳本時通知其他成員
- AC6: 支援關閉特定類型的通知

**通知類型:**
- 🚨 預算超支警告
- 💰 大額支出提醒（自定義金額）
- 👥 成員異動通知
- 📊 月度財務報告
- ⚡ 即時記帳通知（可選）

---

### US032: 家庭財務報告 (P3)
**作為** 家庭管理者  
**我希望** 能產生家庭財務總覽報告  
**以便** 進行家庭理財規劃  

**接受條件:**
- AC1: 顯示家庭總收支和各成員貢獻
- AC2: 成員消費排行和分類分析
- AC3: 家庭預算執行情況
- AC4: 可匯出家庭財務月報/年報
- AC5: 支援成員消費比較分析
- AC6: 提供家庭理財建議

---

### US033: 協作帳本切換 (P3)
**作為** 多帳本使用者  
**我希望** 能在個人帳本和家庭帳本間切換  
**以便** 分別管理個人和家庭財務  

**接受條件:**
- AC1: 頂部導航提供帳本切換器
- AC2: 清楚顯示目前所在帳本
- AC3: 個人帳本和共享帳本資料完全分離
- AC4: 可以同時參與多個共享帳本
- AC5: 帳本切換時保存當前操作狀態
- AC6: 各帳本有獨立的設定和偏好

**使用流程:**
1. 點擊頂部帳本名稱
2. 選擇要切換的帳本
3. 系統載入該帳本資料
4. 顯示該帳本的記錄和統計

---

## 開發階段建議

### Phase 1 (MVP): P0 功能
- US001-005: 基礎記帳功能
- US006: 預設分類系統
- US009: 基礎統計
- US022: 資料同步
- US023: 帳號系統
- US026: 效能需求

### Phase 2: P1 功能  
- US007: 自定義分類
- US010-014: 完整統計和預算功能
- US015: 多幣別基礎
- US019-021: 搜尋和平台特色

### Phase 3: P2 功能
- US008, US016-018: 進階功能
- US024-025, US027: 體驗優化
- US028-030: 基礎協作功能

### Phase 4: P3 功能
- US031-033: 進階協作功能
- 語音輸入、進階分析等創新功能